<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link rel="stylesheet" href="/static/css/normalize.css">
        <link rel="stylesheet" href="/static/css/skeleton.css">
    </head>
    <body>
        <div class='container'>
            <div>
                <h1>SQUAD Demo</h1>
                <b id='request_status'></b>
            </div>
                <table>
                    <b id='request_status'></b>
                    <tbody>
                        <tr>
                            <td>Context</td>
                            <td><textarea id='context_holder' rows=5 cols=100></textarea></td>
                        </tr>
                        <tr>
                            <td><button id='go'>Get Answer</button></td>
                            <td><textarea id='question_holder' rows=5 cols=100></textarea></td>
                        </tr>
                        <tr>
                            <td>Answer</td><td><p id='answer_holder'></p></td>
                        </tr>
                    </tbody>
                </table>
            <script>
                //----------------------------------------------------
                $('#go').on('click', function () {
                    $("#request_status").text('Request In Flight');
                    var q = $("#question_holder").val();
                    var c = $("#context_holder").val();
                    var data = {"paragraph": c, "question": q};
                    console.log(data);
                    var url = "/get-context";
                    $.ajax({type: 'POST',
                            url: url,
                            data: JSON.stringify(data),
                            complete: function (xhr, state){
                                $("#request_status").text('');
                                $("#request_status").text(state);
                            }, // ----------complete
                            success: function (retdata){
                                console.log(retdata);
                                var ans = retdata['result'];
                                console.log(ans);
                                $("#answer_holder").text(ans);
                                $("#question_holder").text(q);
                                console.log('OK');
                            },
                            contentType: "application/json",
                            dataType: 'json'
                    });
                });
            // enter button compatibility
            $("#question_holder").keyup(function(event){
                    if(event.keyCode == 13){
                                $("#go").click();
                                    }
            });
            </script>
        </div>
    </body>
</html>
